<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Page Organizer</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="organizer-container">
      <!-- Step 1: Upload PDF -->
      <div id="uploadStep" class="organizer-step active">
        <div class="organizer-header">
          <button class="back-btn" id="backToMain">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            <span data-lang-ja="戻る" data-lang-en="Back">戻る</span>
          </button>
          <h1 class="organizer-title">
            <span data-lang-ja="PDFページ整理" data-lang-en="PDF Page Organizer"
              >PDFページ整理</span
            >
          </h1>
        </div>

        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">📑</div>
          <h2 data-lang-ja="PDFファイルを選択" data-lang-en="Select PDF File">
            PDFファイルを選択
          </h2>
          <p
            data-lang-ja="ドラッグ&ドロップまたはクリックして選択"
            data-lang-en="Drag & Drop or Click to Select"
          >
            ドラッグ&ドロップまたはクリックして選択
          </p>
          <input
            type="file"
            id="pdfFileInput"
            accept=".pdf"
            style="display: none"
          />
          <button
            class="btn secondary"
            id="browseBtn"
            data-lang-ja="ファイルを選択"
            data-lang-en="Browse Files"
          >
            ファイルを選択
          </button>
          <div id="fileInfo" class="file-info" style="display: none">
            <div class="file-name" id="fileName"></div>
            <div class="file-size" id="fileSize"></div>
            <button class="btn small danger" id="removeFile">
              <span data-lang-ja="削除" data-lang-en="Remove">削除</span>
            </button>
          </div>
        </div>

        <div class="upload-actions">
          <button class="btn big primary" id="loadPdfBtn" style="display: none">
            <span data-lang-ja="PDFを読み込む" data-lang-en="Load PDF"
              >PDFを読み込む</span
            >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M5 12h14M12 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </div>

      <!-- Step 2: Organize Pages -->
      <div id="organizeStep" class="organizer-step">
        <div class="organizer-header">
          <button class="back-btn" id="backToUpload">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            <span data-lang-ja="戻る" data-lang-en="Back">戻る</span>
          </button>
          <h1 class="organizer-title">
            <span data-lang-ja="ページを整理" data-lang-en="Organize Pages"
              >ページを整理</span
            >
          </h1>
        </div>

        <div class="organize-content">
          <!-- Control Panel -->
          <div class="control-panel">
            <div class="control-section">
              <h3 data-lang-ja="ファイル情報" data-lang-en="File Info">
                ファイル情報
              </h3>
              <div class="info-grid">
                <div class="info-item">
                  <span
                    class="info-label"
                    data-lang-ja="総ページ数"
                    data-lang-en="Total Pages"
                    >総ページ数:</span
                  >
                  <span class="info-value" id="totalPages">0</span>
                </div>
                <div class="info-item">
                  <span
                    class="info-label"
                    data-lang-ja="ファイルサイズ"
                    data-lang-en="File Size"
                    >ファイルサイズ:</span
                  >
                  <span class="info-value" id="fileInfoSize">0 MB</span>
                </div>
              </div>
            </div>

            <div class="control-section">
              <h3 data-lang-ja="並び替え" data-lang-en="Sort Pages">
                並び替え
              </h3>
              <div class="sort-buttons">
                <button class="btn sort-btn" id="sortAscBtn">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 5v14M5 12l7-7 7 7" />
                  </svg>
                  <span data-lang-ja="昇順" data-lang-en="Ascending">昇順</span>
                </button>
                <button class="btn sort-btn" id="sortDescBtn">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 19V5M5 12l7 7 7-7" />
                  </svg>
                  <span data-lang-ja="降順" data-lang-en="Descending"
                    >降順</span
                  >
                </button>
              </div>
              <button class="btn sort-btn" id="resetOrderBtn">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"
                  />
                  <path d="M21 3v5h-5" />
                  <path
                    d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"
                  />
                  <path d="M3 21v-5h5" />
                </svg>
                <span data-lang-ja="リセット" data-lang-en="Reset Order"
                  >リセット</span
                >
              </button>
            </div>

            <div class="control-section">
              <h3 data-lang-ja="アクション" data-lang-en="Actions">
                アクション
              </h3>
              <div class="action-buttons">
                <button class="btn" id="addMoreBtn">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 5v14M5 12h14" />
                  </svg>
                  <span data-lang-ja="ファイルを追加" data-lang-en="Add Files"
                    >ファイルを追加</span
                  >
                </button>
                <button class="btn danger" id="clearAllBtn">
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"
                    />
                  </svg>
                  <span data-lang-ja="全削除" data-lang-en="Clear All"
                    >全削除</span
                  >
                </button>
              </div>
            </div>

            <div class="control-section save-section">
              <button class="btn big success" id="savePdfBtn">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"
                  />
                </svg>
                <span data-lang-ja="PDFを保存" data-lang-en="Save PDF"
                  >PDFを保存</span
                >
              </button>
            </div>
          </div>

          <!-- Pages Grid -->
          <div class="pages-area">
            <div id="pagesGrid" class="pages-grid">
              <!-- Pages will be rendered here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Hidden file input for adding more files -->
      <input
        type="file"
        id="addMoreFileInput"
        accept=".pdf,.png,.jpg,.jpeg"
        multiple
        style="display: none"
      />
      <!-- ✅ Hidden file input for inserting pages -->
      <input
        type="file"
        id="insertFileInput"
        accept=".pdf,.png,.jpg,.jpeg"
        multiple
        class="insert-file-input"
      />

      <!-- ✅ Insert options modal (hidden by default) -->
      <div id="insertModal" class="insert-modal" style="display: none">
        <div class="insert-modal-content">
          <h3
            class="insert-modal-title"
            data-lang-ja="挿入オプション"
            data-lang-en="Insert Options"
          >
            挿入オプション
          </h3>
          <div class="insert-modal-buttons">
            <button class="btn insert-option-btn" id="insertFileBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"
                />
                <polyline points="13 2 13 9 20 9" />
              </svg>
              <span data-lang-ja="ファイルを挿入" data-lang-en="Insert File"
                >ファイルを挿入</span
              >
            </button>
            <button class="btn insert-option-btn" id="insertBlankBtn">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                <line x1="12" y1="8" x2="12" y2="16" />
                <line x1="8" y1="12" x2="16" y2="12" />
              </svg>
              <span
                data-lang-ja="白紙ページを挿入"
                data-lang-en="Insert Blank Page"
                >白紙ページを挿入</span
              >
            </button>
          </div>
          <button
            class="btn small"
            id="cancelInsertBtn"
            style="margin-top: 12px"
          >
            <span data-lang-ja="キャンセル" data-lang-en="Cancel"
              >キャンセル</span
            >
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="feature.js"></script>
  </body>
</html>
