<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Merge & Edit</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="upload-header">
      <button id="backToHome" class="back-btn" title="Back to Home">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        <span>Back</span>
      </button>
      <h1 id="uploadTitle">Upload PDFs & Images</h1>
    </div>
    <!-- Upload Stage -->
    <div id="uploadStage" class="stage active">
      <div class="upload-container">
        <div id="dropZone" class="drop-zone">
          <div class="drop-zone-inner">
            <div class="drop-icon">
              <svg
                width="64"
                height="64"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
            </div>
            <p id="dropText" class="drop-text">Drag & drop files here</p>
            <p class="drop-hint">or</p>
            <button id="browseBtn" class="browse-btn">Browse Files</button>
            <input
              type="file"
              id="fileInput"
              accept=".pdf,.png,.jpg,.jpeg"
              multiple
              hidden
            />
            <p class="file-types">Supports: PDF, PNG, JPG, JPEG</p>
          </div>
        </div>

        <div class="upload-actions" id="uploadActions" style="display: none">
          <div class="file-summary">
            <span id="fileCount">0 files</span>
            <span id="totalSize">0 KB</span>
          </div>
          <div class="action-buttons">
            <button id="clearFiles" class="btn btn-secondary">Clear All</button>
            <button id="proceedBtn" class="btn btn-primary">
              Continue to Editor
            </button>
          </div>
        </div>

        <div id="filesList" class="files-list"></div>
      </div>
    </div>

    <!-- Editor Stage -->
    <div id="editorStage" class="stage">
      <div class="editor-layout">
        <!-- Thumbnail Sidebar -->
        <aside class="thumbnail-sidebar">
          <div id="thumbnailContainer" class="thumbnail-container"></div>
        </aside>

        <!-- Canvas Area -->
        <main class="canvas-area">
          <div class="canvas-container">
            <canvas id="mainCanvas"></canvas>
            <canvas id="annotCanvas"></canvas>
          </div>
        </main>

        <!-- Toolbar Sidebar -->
        <aside class="toolbar-sidebar">
          <div class="toolbar-section">
            <div class="toolbar-section-title">Navigation</div>
            <div class="toolbar-actions">
              <button class="btn" id="backToUpload">← Back to Files</button>
              <button class="btn btn-success" id="savePdf">Save PDF</button>
            </div>
          </div>

          <div class="toolbar-section">
            <div class="toolbar-section-title">Zoom</div>
            <div class="zoom-controls">
              <div class="zoom-display" id="zoomDisplay">100%</div>
              <div class="zoom-buttons">
                <button class="btn zoom-btn" id="zoomOut" title="Zoom Out">
                  −
                </button>
                <button class="btn zoom-btn" id="resetZoom" title="Reset">
                  ⟲
                </button>
                <button class="btn zoom-btn" id="zoomIn" title="Zoom In">
                  +
                </button>
              </div>
            </div>
          </div>

          <div class="toolbar-section">
            <div class="toolbar-section-title">Tools</div>
            <div class="annotation-tools">
              <div class="tool-row">
                <button
                  class="tool-btn active"
                  data-tool="pointer"
                  title="Pointer"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z" />
                  </svg>
                </button>
                <button
                  class="tool-btn"
                  data-tool="rectangle"
                  title="Rectangle"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect x="3" y="3" width="18" height="18" rx="2" />
                  </svg>
                </button>
                <button
                  class="tool-btn"
                  data-tool="highlight"
                  title="Highlight"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                  >
                    <path
                      d="M17.7 4.3a1 1 0 0 1 0 1.4l-11 11a1 1 0 0 1-1.4 0l-2-2a1 1 0 0 1 1.4-1.4l1.3 1.3 10.3-10.3a1 1 0 0 1 1.4 0z"
                    />
                    <path d="M2 20h20v2H2z" opacity="0.5" />
                  </svg>
                </button>
              </div>
              <div class="tool-row">
                <button class="tool-btn" data-tool="line" title="Line">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <line x1="7" y1="17" x2="17" y2="7" />
                    <polyline points="12,7 17,7 17,12" />
                  </svg>
                </button>
                <button class="tool-btn" data-tool="pen" title="Pen">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M12 19l7-7 3 3-7 7-3-3z" />
                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" />
                    <path d="M2 2l7.586 7.586" />
                  </svg>
                </button>
                <button class="tool-btn" data-tool="text" title="Text">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <polyline points="4 7 4 4 20 4 20 7" />
                    <line x1="9" y1="20" x2="15" y2="20" />
                    <line x1="12" y1="4" x2="12" y2="20" />
                  </svg>
                </button>
              </div>
              <div class="tool-divider"></div>
              <div class="tool-row">
                <button class="tool-btn" id="undo" title="Undo">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M3 7v6h6" />
                    <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13" />
                  </svg>
                </button>
                <button class="tool-btn" id="redo" title="Redo">
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M21 7v6h-6" />
                    <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7" />
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <div class="toolbar-section">
            <div class="toolbar-section-title">Colors</div>
            <div class="color-picker">
              <button
                class="color-btn active"
                data-color="#ff0000"
                style="background: #ff0000"
              ></button>
              <button
                class="color-btn"
                data-color="#00ff00"
                style="background: #00ff00"
              ></button>
              <button
                class="color-btn"
                data-color="#0000ff"
                style="background: #0000ff"
              ></button>
              <button
                class="color-btn"
                data-color="#ffff00"
                style="background: #ffff00"
              ></button>
              <button
                class="color-btn"
                data-color="#ff00ff"
                style="background: #ff00ff"
              ></button>
              <button
                class="color-btn"
                data-color="#00ffff"
                style="background: #00ffff"
              ></button>
              <button
                class="color-btn"
                data-color="#000000"
                style="background: #000000"
              ></button>
              <button
                class="color-btn"
                data-color="#ffffff"
                style="background: #ffffff; border: 1px solid #ccc"
              ></button>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none">
      <div class="loading-content">
        <div class="taichi-spinner"></div>
        <div class="loading-text">
          <span id="loadingMessage">Processing...</span>
          <span id="loadingProgress" class="loading-progress">0%</span>
        </div>
      </div>
    </div>
    <script src="feature.js"></script>
  </body>
</html>
